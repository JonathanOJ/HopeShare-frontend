<header class="header">
  <section class="container">
    <img
      (click)="redirectTo('hopeshare/home')"
      class="hidden md:flex w-[190px] cursor-pointer"
      src="./../../../assets/images/logo-marca.png"
      alt="Logo HopeShare"
    />
    <img
      (click)="redirectTo('hopeshare/home')"
      class="md:hidden cursor-pointer w-[50px]"
      src="./../../../assets/images/icone.png"
      alt="Logo HopeShare"
    />
    <p-tabView class="h-[60px] hidden md:flex" [(activeIndex)]="activeIndex" (click)="tabChange()">
      <p-tabPanel header="Home"> </p-tabPanel>
      @if (userSession?.cnpj || userSession?.is_admin) {
        <p-tabPanel header="Meus posts"> </p-tabPanel>
        <p-tabPanel header="Dashboard"> </p-tabPanel>
        <p-tabPanel header="Relatórios"> </p-tabPanel>
      }
      @if (userSession?.is_admin) {
        <p-tabPanel header="Painel Admin"> </p-tabPanel>
      }
    </p-tabView>
    @if (!userSession) {
      <div class="flex gap-3">
        <p-button
          size="small"
          [rounded]="true"
          [outlined]="true"
          label="Registre-se grátis"
          (click)="redirectTo('hopeshare/register')"
        />
        <p-button size="small" [rounded]="true" label="Login" (click)="redirectTo('login')" />
      </div>
    } @else {
      <p-button
        size="small"
        [rounded]="true"
        [outlined]="true"
        icon="pi pi-palette"
        (click)="toggleTheme()"
        [label]="currentTheme === 'light' ? 'Dark' : 'Light'"
      />
      <section class="flex items-center gap-2 cursor-pointer">
        @if (userSession.image) {
          <img
            (click)="menu.toggle($event)"
            class="w-10 h-10"
            [src]="userSession.image"
            alt="User profile image of {{ userSession.username }}"
          />
        } @else {
          <span
            (click)="menu.toggle($event)"
            class="w-10 h-10 flex justify-center items-center rounded-full"
            style="background-color: var(--primary-color); color: var(--primary-color-text)"
            >{{ userSession.username[0].toUpperCase() }}</span
          >
        }

        <p-menu #menu [model]="settings" [popup]="true" />
      </section>
    }
  </section>
</header>

<p-dialog header="Contato com Suporte" [modal]="true" [(visible)]="visible" [style]="{ width: '35rem' }">
  <form *ngIf="supportForm" [formGroup]="supportForm" class="flex flex-col gap-5">
    <span class="p-text-secondary block mb-5">
      Preencha os campos abaixo para enviar sua mensagem à equipe de suporte.
    </span>

    <div class="flex flex-col gap-1.5">
      <label for="name" class="text-sm" style="color: var(--text-color-secondary)">Nome</label>
      <input pInputText id="name" class="flex-auto" formControlName="name" autocomplete="off" />
      @if (name?.invalid && (name?.dirty || name?.touched)) {
        <span class="text-xs" style="color: var(--red-500)"> Nome é obrigatório! </span>
      }
    </div>

    <div class="flex flex-col gap-1.5">
      <label for="subject" class="text-sm" style="color: var(--text-color-secondary)">Assunto</label>
      <input pInputText id="subject" class="flex-auto" formControlName="subject" autocomplete="off" />
      @if (subject?.invalid && (subject?.dirty || subject?.touched)) {
        <span class="text-xs" style="color: var(--red-500)"> Assunto é obrigatório! </span>
      }
    </div>

    <div class="flex flex-col gap-1.5">
      <label for="message" class="text-sm" style="color: var(--text-color-secondary)">Mensagem</label>
      <textarea pInputTextarea id="message" rows="5" class="flex-auto" formControlName="message"></textarea>
      @if (message?.invalid && (message?.dirty || message?.touched)) {
        <span class="text-xs" style="color: var(--red-500)"> Mensagem é obrigatório! </span>
      }
    </div>

    <div class="flex justify-end gap-2 mt-2">
      <p-button label="Cancelar" severity="secondary" (onClick)="visible = false" />
      <p-button label="Enviar" icon="pi pi-send" [disabled]="loading" (onClick)="sendSupportEmail()" />
    </div>
  </form>
</p-dialog>

