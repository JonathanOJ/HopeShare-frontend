<header class="header">
  <section class="container">
    <img
      (click)="redirectTo('hopeshare/home')"
      class="hidden md:flex w-[200px] cursor-pointer"
      src="./../../../assets/images/logo-marca.png"
      alt="Logo HopeShare"
    />
    <img
      (click)="redirectTo('hopeshare/home')"
      class="md:hidden cursor-pointer w-[50px]"
      src="./../../../assets/images/icone.png"
      alt="Logo HopeShare"
    />
    <p-tabView class="h-[60px] hidden md:flex" [(activeIndex)]="activeIndex" (click)="tabChange()">
      <p-tabPanel header="Home"> </p-tabPanel>
      @if (userSession?.cnpj || userSession?.is_admin) {
        <p-tabPanel header="Meus posts"> </p-tabPanel>
        <p-tabPanel header="Dashboard"> </p-tabPanel>
        <p-tabPanel header="Relatórios"> </p-tabPanel>
      }
      @if (userSession?.is_admin) {
        <p-tabPanel header="Denúncias"> </p-tabPanel>
      }
    </p-tabView>
    @if (!userSession) {
      <div class="flex gap-3">
        <p-button
          size="small"
          [rounded]="true"
          [outlined]="true"
          label="Registre-se grátis"
          (click)="redirectTo('hopeshare/register')"
        />
        <p-button size="small" [rounded]="true" label="Login" (click)="redirectTo('login')" />
      </div>
    } @else {
      <section class="flex items-center gap-2 cursor-pointer">
        @if (userSession.image) {
          <img class="w-10 h-10" [src]="userSession.image" alt="User profile image of {{ userSession.username }}" />
        } @else {
          <span class="w-10 h-10 flex justify-center items-center bg-[#3b82f6] text-white rounded-full">{{
            userSession.username[0].toUpperCase()
          }}</span>
        }
        <div class="hidden md:flex flex-col">
          <span class="text-sm font-semibold text-[#4F4F4F]">
            {{ userSession.username }}
          </span>
          <span class="text-[#5D5D5D] text-xs">{{ userSession.email }}</span>
        </div>

        <div class="card flex justify-content-center">
          <p-button icon="pi pi-cog" [rounded]="true" (onClick)="menu.toggle($event)" />
          <p-menu #menu [model]="settings" [popup]="true" />
        </div>
      </section>
    }
  </section>
</header>

<p-dialog header="Contato com Suporte" [modal]="true" [(visible)]="visible" [style]="{ width: '35rem' }">
  <form *ngIf="supportForm" [formGroup]="supportForm" class="flex flex-col gap-5">
    <span class="p-text-secondary block mb-5">
      Preencha os campos abaixo para enviar sua mensagem à equipe de suporte.
    </span>

    <div class="flex flex-col gap-1.5">
      <label for="name" class="text-sm text-[#4F4F4F]">Nome</label>
      <input pInputText id="name" class="flex-auto" formControlName="name" autocomplete="off" />
      @if (name?.invalid && (name?.dirty || name?.touched)) {
        <span class="text-xs text-[#ff2637]"> Nome é obrigatório! </span>
      }
    </div>

    <div class="flex flex-col gap-1.5">
      <label for="subject" class="text-sm text-[#4F4F4F]">Assunto</label>
      <input pInputText id="subject" class="flex-auto" formControlName="subject" autocomplete="off" />
      @if (subject?.invalid && (subject?.dirty || subject?.touched)) {
        <span class="text-xs text-[#ff2637]"> Assunto é obrigatório! </span>
      }
    </div>

    <div class="flex flex-col gap-1.5">
      <label for="message" class="text-sm text-[#4F4F4F]">Mensagem</label>
      <textarea pInputTextarea id="message" rows="5" class="flex-auto" formControlName="message"></textarea>
      @if (message?.invalid && (message?.dirty || message?.touched)) {
        <span class="text-xs text-[#ff2637]"> Mensagem é obrigatório! </span>
      }
    </div>

    <div class="flex justify-end gap-2 mt-2">
      <p-button label="Cancelar" severity="secondary" (onClick)="visible = false" />
      <p-button label="Enviar" icon="pi pi-send" [disabled]="loading" (onClick)="sendSupportEmail()" />
    </div>
  </form>
</p-dialog>

